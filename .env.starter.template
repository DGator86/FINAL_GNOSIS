# ============================================================================
# GNOSIS $1000 STARTER ACCOUNT - ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env.starter and fill in your values:
#   cp .env.starter.template .env.starter
#   nano .env.starter
#
# Then run with:
#   python main.py run-once --symbol SPY --env-file .env.starter
# ============================================================================

# === ALPACA API CREDENTIALS (REQUIRED) ===
# Get these from: https://app.alpaca.markets/paper/dashboard/overview
# START WITH PAPER TRADING! Switch to live only after 1+ week success

ALPACA_API_KEY=your_paper_api_key_here
ALPACA_SECRET_KEY=your_paper_secret_key_here

# Paper trading (RECOMMENDED START):
ALPACA_BASE_URL=https://paper-api.alpaca.markets

# Live trading (ONLY after successful paper trading):
# ALPACA_BASE_URL=https://api.alpaca.markets

# === ACCOUNT CONFIGURATION ===
DEFAULT_CAPITAL=1000               # Your starting capital
APP_ENV=paper                       # paper or production
ENABLE_TRADING=false                # Set to true when ready to trade

# === RISK MANAGEMENT (CRITICAL!) ===
# These limits protect your $1000 account

MAX_DAILY_LOSS=20                  # Stop trading if down $20 in a day (2%)
MAX_POSITION_SIZE=0.20             # Max 20% per position = $200
MAX_POSITIONS=2                    # Maximum 2 concurrent positions
MIN_CONFIDENCE=0.70                # Only trade signals with 70%+ confidence

# Stop ALL trading if account drops to $850 (-15%)
MAX_DRAWDOWN=0.15

# === TRADING STRATEGY ===
# Focus on SPY and QQQ - most liquid, avoid PDT issues

TRADING_SYMBOLS=SPY,QQQ            # Start with just 2 ETFs
# Later add: TRADING_SYMBOLS=SPY,QQQ,AAPL,MSFT,NVDA

# Trade type
TRADE_TYPE=swing                   # "swing" = hold 2+ days (avoids PDT)
                                   # "day" = intraday (requires $25k)

# Position sizing
POSITION_SIZING_METHOD=fixed_fractional  # Simple sizing for small account
KELLY_FRACTION=0.25                # If using Kelly, be conservative
MIN_POSITION_SIZE=50               # Minimum $50 per position

# === PDT (Pattern Day Trading) AVOIDANCE ===
# If account < $25k, limited to 3 day trades per 5 days

MIN_HOLD_DAYS=2                    # Hold minimum 2 days (avoids day trade)
TARGET_HOLD_DAYS=5                 # Target 5-day holds
MAX_HOLD_DAYS=20                   # Force exit by day 20

DAILY_TRADE_LIMIT=1                # Max 1 new trade per day
WEEKLY_TRADE_LIMIT=3               # Max 3 trades per week (PDT safe)

# === RISK SETTINGS ===
STOP_LOSS_PCT=0.05                 # 5% stop loss = $5 on $100 position
TAKE_PROFIT_PCT=0.10               # 10% take profit = 2:1 reward/risk
TRAILING_STOP_PCT=0.03             # 3% trailing stop

MIN_REWARD_RISK_RATIO=2.0          # Require 2:1 reward/risk minimum

# === FEES & SLIPPAGE ===
COMMISSION_PER_TRADE=0             # Alpaca = $0 commissions
SLIPPAGE_ESTIMATE=0.0005           # Assume 0.05% slippage (realistic)

# === PERFORMANCE TARGETS ===
# Be realistic! 5% monthly = excellent

DAILY_TARGET_PCT=0.005             # 0.5% per day = $5
WEEKLY_TARGET_PCT=0.025            # 2.5% per week = $25
MONTHLY_TARGET_PCT=0.05            # 5% per month = $50

# === NOTIFICATIONS (RECOMMENDED) ===
ENABLE_NOTIFICATIONS=true

# Telegram (get from @BotFather)
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Email alerts
ALERT_EMAIL=your-email@example.com
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@example.com
SMTP_PASSWORD=your-app-password

# Discord webhook (optional)
DISCORD_WEBHOOK_URL=

# === API CONFIGURATION ===
API_HOST=0.0.0.0
API_PORT=8000
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# JWT Authentication
JWT_SECRET_KEY=change-me-in-production-use-long-random-string
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# === REDIS (OPTIONAL - for caching) ===
# Improves performance but not required
REDIS_URL=redis://localhost:6379/0
ENABLE_REDIS=false

# === OPTIONAL DATA SOURCES ===
# These can improve analysis but not required

# Unusual Whales (options flow)
UNUSUAL_WHALES_API_TOKEN=

# Massive.com (alternative data)
MASSIVE_API_KEY=
MASSIVE_API_SECRET=

# === SCANNING & EXECUTION ===
SCAN_INTERVAL=300                  # Scan every 5 minutes
POSITION_CHECK_INTERVAL=60         # Check positions every minute

# Market hours (EST)
MARKET_OPEN_HOUR=9
MARKET_OPEN_MINUTE=30
MARKET_CLOSE_HOUR=16
MARKET_CLOSE_MINUTE=0

# === LOGGING ===
LOG_LEVEL=INFO                     # INFO for normal, DEBUG for troubleshooting
LOG_TO_FILE=true
LOG_DIRECTORY=logs
DEBUG=false

# === MONITORING ===
# Prometheus metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# Health checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=60

# === BACKTEST (Optional - for testing strategies) ===
BACKTEST_START_DATE=2024-01-01
BACKTEST_END_DATE=2024-12-31
BACKTEST_INITIAL_CAPITAL=1000

# === ADVANCED SETTINGS (Don't change unless you know what you're doing) ===

# Engine weights (how much to trust each engine)
HEDGE_WEIGHT=0.40
LIQUIDITY_WEIGHT=0.25
SENTIMENT_WEIGHT=0.20
PHYSICS_WEIGHT=0.15

# Minimum engines agreeing
MIN_ENGINES_AGREEING=3

# Consensus threshold
MIN_CONSENSUS=0.70                 # Require 70% agreement

# Liquidity requirements
MIN_VOLUME=1000000                 # Minimum 1M daily volume
MAX_SPREAD_PCT=0.003               # Max 0.3% spread

# Volatility limits
MAX_VOLATILITY=1.0                 # Max 100% annualized volatility

# === DATABASE (Optional - for trade history) ===
# By default, uses SQLite (file-based)
DATABASE_URL=sqlite:///./data/gnosis.db

# For PostgreSQL (production):
# DATABASE_URL=postgresql://user:password@localhost/gnosis

# === DEVELOPMENT/TESTING ===
# Only use these for development

TESTING_MODE=false                 # Enables test mode (paper trading with fake data)
DRY_RUN=false                      # Show what would be traded but don't execute
VERBOSE=false                      # Extra verbose logging

# === SAFETY CIRCUIT BREAKERS ===
# Automatic safety stops

ENABLE_CIRCUIT_BREAKERS=true
CIRCUIT_BREAKER_DAILY_LOSS=20      # Stop at -$20 daily
CIRCUIT_BREAKER_WEEKLY_LOSS=50     # Stop at -$50 weekly
CIRCUIT_BREAKER_DRAWDOWN=150       # Stop at -$150 total drawdown

# Auto-restart after circuit breaker?
AUTO_RESTART_AFTER_HOURS=24        # Restart 24 hours after circuit breaker

# === SCALING RULES (Auto-adjust as account grows) ===
# Automatically adjust position sizing as account grows

ENABLE_AUTO_SCALING=true

# $1000-$2500: Starter settings
TIER_1_CAPITAL=1000
TIER_1_MAX_POSITIONS=2
TIER_1_MAX_POSITION_SIZE=0.20
TIER_1_MIN_CONFIDENCE=0.75

# $2500-$5000: Intermediate
TIER_2_CAPITAL=2500
TIER_2_MAX_POSITIONS=3
TIER_2_MAX_POSITION_SIZE=0.15
TIER_2_MIN_CONFIDENCE=0.70

# $5000-$10000: Growing
TIER_3_CAPITAL=5000
TIER_3_MAX_POSITIONS=5
TIER_3_MAX_POSITION_SIZE=0.12
TIER_3_MIN_CONFIDENCE=0.65

# $10000+: Advanced
TIER_4_CAPITAL=10000
TIER_4_MAX_POSITIONS=7
TIER_4_MAX_POSITION_SIZE=0.10
TIER_4_MIN_CONFIDENCE=0.60

# ============================================================================
# SETUP INSTRUCTIONS:
# ============================================================================
# 1. Copy this file:
#    cp .env.starter.template .env.starter
#
# 2. Get Alpaca API keys (PAPER TRADING):
#    https://app.alpaca.markets/paper/dashboard/overview
#
# 3. Fill in at minimum:
#    - ALPACA_API_KEY
#    - ALPACA_SECRET_KEY
#    - TELEGRAM_BOT_TOKEN (optional but recommended)
#    - TELEGRAM_CHAT_ID
#
# 4. Test connection:
#    python -c "from alpaca_trade_api import REST; api = REST(); print(api.get_account())"
#
# 5. Run first analysis:
#    python main.py run-once --symbol SPY --env-file .env.starter
#
# 6. Start paper trading:
#    ENABLE_TRADING=true python run_trading_daemon.py --env-file .env.starter
#
# 7. Monitor:
#    streamlit run dashboard.py
#
# ============================================================================
# IMPORTANT SAFETY REMINDERS:
# ============================================================================
# ✅ START WITH PAPER TRADING (1+ week minimum)
# ✅ Only trade with money you can afford to lose
# ✅ $1000 → $1050 in a month = EXCELLENT (5%)
# ✅ Expect losing days and weeks - that's normal
# ✅ NEVER remove stop losses
# ✅ NEVER increase position size after losses
# ✅ NEVER trade on emotion
# ✅ Follow your rules even when tempted not to
#
# This is not financial advice. Past performance doesn't guarantee future results.
# ============================================================================
