# Super Gnosis / DHPE v3 Configuration

engines:
  hedge:
    enabled: true
    lookback_days: 30
    min_dte: 7
    max_dte: 60
    
  liquidity:
    enabled: true
    min_volume: 100000.0
    max_spread_pct: 0.5
    
  sentiment:
    enabled: true
    news_weight: 0.4
    flow_weight: 0.3
    technical_weight: 0.3
    
  elasticity:
    enabled: true
    volatility_window: 20

# Enable all agents by default
agents:
  all: true
  hedge:
    enabled: true
    min_confidence: 0.5

  liquidity:
    enabled: true
    min_liquidity_score: 0.3

  sentiment:
    enabled: true
    min_sentiment_threshold: 0.2

  composer:
    enabled: true
    weights:
      hedge: 0.4
      liquidity: 0.2
      sentiment: 0.4

  trade:
    enabled: true
    max_position_size: 10000.0
    risk_per_trade: 0.02

backtest:
  use_all_components: true
  use_real_data: true
  cache_enabled: true
  start_date: "2020-01-01"
  end_date: null

data_sources:
  primary: massive
  options_provider: massive
  unusual_whales_enabled: true
  cache_path: data/historical

# Dynamic Top 25 Scanner Configuration
scanner:
  mode: dynamic_top_n          # forces dynamic ranking every run
  default_top_n: 25            # THIS IS THE MAGIC LINE - always top 25
  ranking_criteria:
    options_volume_weight: 0.40     # highest weight on actual options activity
    open_interest_weight: 0.25      # OI shows positioning
    gamma_exposure_weight: 0.20     # dealer gamma pressure
    liquidity_score_weight: 0.10    # ensure tradability
    unusual_flow_weight: 0.05       # catch momentum shifts
  min_daily_options_volume: 500000  # filters out illiquid junk
  require_unusual_whales: false     # still works without the key (uses public data/fallbacks)
  update_frequency: 300              # re-rank every 5 minutes (300 seconds)
  cache_duration: 60                 # cache individual symbol data for 1 minute

# Trading Configuration
trading:
  multi_symbol_default: true    # multi-symbol-loop becomes the default behavior
  max_concurrent_positions: 10  # max positions across all symbols
  position_size_pct: 0.04       # 4% of capital per position
  stop_loss_pct: 0.02           # 2% stop loss
  take_profit_pct: 0.05         # 5% take profit
  
tracking:
  ledger_path: "data/ledger.jsonl"
  log_level: "INFO"
  enable_position_tracking: true

adaptation:
  enabled: true
  state_path: "data/adaptation_state.json"
  min_trades_for_update: 5
  performance_lookback: 20
  min_risk_per_trade: 0.005
  max_risk_per_trade: 0.05
